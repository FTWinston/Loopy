(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(t,e,n){t.exports=n(17)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=n(0),a=n(7),i=n(1),s=n(2),r=n(4),l=n(3),u=n(5),c=(n(14),function(){function t(e){Object(i.a)(this,t),this.delaySeconds=e,this.audioCtx=void 0,this.source=void 0,this.gain=void 0,this.delay=void 0,this.audioCtx=new AudioContext,this.gain=this.audioCtx.createGain(),this.delay=null}return Object(s.a)(t,[{key:"setSource",value:function(t){this.source&&this.source.disconnect(this.gain),this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.gain)}},{key:"setVolume",value:function(t){this.gain.gain.setValueAtTime(t,this.audioCtx.currentTime)}},{key:"setDelay",value:function(t){this.delaySeconds=t}},{key:"start",value:function(){null===this.delay&&(this.delay=this.audioCtx.createDelay(60),this.delay.delayTime.setValueAtTime(this.delaySeconds,this.audioCtx.currentTime),this.gain.connect(this.delay),this.delay.connect(this.audioCtx.destination),this.audioCtx.resume())}},{key:"stop",value:function(){null!==this.delay&&(this.gain.disconnect(this.delay),this.delay.disconnect(this.audioCtx.destination),this.delay=null,this.audioCtx.suspend())}}]),t}()),p=(n(15),function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(r.a)(this,Object(l.a)(e).call(this,t))).interval=void 0,n.state={beatsRemaining:t.numBeats,loopNumber:1},n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){var t=this,e=this.props.playing?"loop loop--playing":"loop loop--stopped",n=this.props.playing?function(){return t.stop()}:function(){return t.start()},a=this.props.playing?o.createElement("button",{className:"loop__button loop__stop",onClick:n},"stop"):o.createElement("button",{className:"loop__button loop__stop",onClick:n},"start");return o.createElement("div",{className:e},a,o.createElement("label",null,"Number of beats:",o.createElement("input",{type:"number",value:this.props.numBeats,onChange:function(e){return t.props.setNumBeats(parseInt(e.target.value,10))},disabled:this.props.playing,min:1,max:200,step:1})),o.createElement("label",null,"Length of each beat (milliseconds):",o.createElement("input",{type:"number",value:this.props.beatLengthMs,onChange:function(e){return t.props.setBeatLength(parseInt(e.target.value,10))},disabled:this.props.playing,min:1,max:1e4,step:1})),o.createElement("div",{className:"loop__beatsRemaining"},this.state.beatsRemaining," beats remaining"),o.createElement("div",{className:"loop__loopNumber"},"Loop #",this.state.loopNumber))}},{key:"start",value:function(){var t=this;this.props.playing||(this.interval=setInterval(function(){return t.beat()},this.props.beatLengthMs),this.setState({beatsRemaining:this.props.numBeats,loopNumber:1}),this.props.start())}},{key:"stop",value:function(){this.props.playing&&(void 0!==this.interval&&(clearInterval(this.interval),this.interval=void 0),this.props.stop())}},{key:"beat",value:function(){var t=this;this.state.beatsRemaining<=1?(this.setState(function(e){return{beatsRemaining:t.props.numBeats,loopNumber:e.loopNumber+1}}),this.props.loop()):this.setState(function(t){return{beatsRemaining:t.beatsRemaining-1}})}}]),e}(o.PureComponent)),h=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(r.a)(this,Object(l.a)(e).call(this,t))).audioLoop=void 0,n.state={beatLengthMs:1e3,error:!1,looping:!1,numBeats:8},n.audioLoop=new c(n.getLoopLength(n.state)),n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(e){t.audioLoop.setSource(e)}).catch(function(e){t.setState({error:!0,looping:!1})})}},{key:"componentWillUpdate",value:function(t,e){e.beatLengthMs===this.state.beatLengthMs&&e.numBeats===this.state.numBeats||this.audioLoop.setDelay(this.getLoopLength(e))}},{key:"render",value:function(){var t=this;if(this.state.error)return o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("h1",{className:"App-title"},"Loopy sound recorder"),o.createElement("p",{className:"App-error"},"Couldn't locate microphone, unable to continue.")));return o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("h1",{className:"App-title"},"Loopy sound recorder"),o.createElement("p",{className:"App-intro"},"You probably ",o.createElement("em",null,"don't")," want to use headphones.")),o.createElement(p,{numBeats:this.state.numBeats,beatLengthMs:this.state.beatLengthMs,setNumBeats:function(e){return t.setNumBeats(e)},setBeatLength:function(e){return t.setBeatLength(e)},playing:this.state.looping,start:function(){return t.startLoop()},stop:function(){return t.stopLoop()},loop:function(){return t.nextLoop()}}))}},{key:"getLoopLength",value:function(t){return t.numBeats*t.beatLengthMs/1e3}},{key:"setNumBeats",value:function(t){this.state.looping||this.setState({numBeats:t})}},{key:"setBeatLength",value:function(t){this.state.looping||this.setState({beatLengthMs:t})}},{key:"startLoop",value:function(){this.audioLoop.start(),this.setState({looping:!0})}},{key:"stopLoop",value:function(){this.audioLoop.stop(),this.setState({looping:!1})}},{key:"nextLoop",value:function(){}}]),e}(o.Component),d=(n(16),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function m(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}a.render(o.createElement(h,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");d?(function(t,e){fetch(t).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):m(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):m(e,t)})}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.532126c4.chunk.js.map