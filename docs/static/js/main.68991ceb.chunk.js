(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(7),a=n(1),s=n(2),r=n(4),u=n(3),c=n(5),l=(n(14),function(){function e(t){Object(a.a)(this,e),this.audioCtx=void 0,this.source=void 0,this.gain=void 0,this.delay=void 0,this.audioCtx=new AudioContext,this.gain=this.audioCtx.createGain(),this.delay=this.audioCtx.createDelay(60),this.delay.delayTime.setValueAtTime(t,this.audioCtx.currentTime)}return Object(s.a)(e,[{key:"setSource",value:function(e){this.source&&this.source.disconnect(this.gain),this.source=this.audioCtx.createMediaStreamSource(e),this.source.connect(this.gain)}},{key:"setVolume",value:function(e){this.gain.gain.setValueAtTime(e,this.audioCtx.currentTime)}},{key:"setDelay",value:function(e){this.delay.delayTime.setValueAtTime(e,this.audioCtx.currentTime)}},{key:"start",value:function(){this.gain.connect(this.delay),this.delay.connect(this.audioCtx.destination)}},{key:"stop",value:function(){var e=this.gain;e.gain.setValueAtTime(e.gain.value,this.audioCtx.currentTime),e.gain.exponentialRampToValueAtTime(1e-4,this.audioCtx.currentTime+.05);var t=this.delay,n=this.audioCtx;setTimeout(function(){e.disconnect(t),t.disconnect(n.destination)},25)}}]),e}()),p=(n(15),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).interval=void 0,n.state={beatsRemaining:e.numBeats,loopNumber:1},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){var e=this,t=this.props.playing?"loop loop--playing":"loop loop--stopped",n=this.props.playing?function(){return e.stop()}:function(){return e.start()},i=this.props.playing?o.createElement("button",{className:"loop__button loop__stop",onClick:n},"stop"):o.createElement("button",{className:"loop__button loop__stop",onClick:n},"start");return o.createElement("div",{className:t},i,o.createElement("label",null,"Number of beats:",o.createElement("input",{type:"number",value:this.props.numBeats,onChange:function(t){return e.props.setNumBeats(parseInt(t.target.value,10))},disabled:this.props.playing,min:1,max:200,step:1})),o.createElement("label",null,"Length of each beat (milliseconds):",o.createElement("input",{type:"number",value:this.props.beatLengthMs,onChange:function(t){return e.props.setBeatLength(parseInt(t.target.value,10))},disabled:this.props.playing,min:1,max:1e4,step:1})),o.createElement("div",{className:"loop__beatsRemaining"},this.state.beatsRemaining," beats remaining"),o.createElement("div",{className:"loop__loopNumber"},"Loop #",this.state.loopNumber))}},{key:"start",value:function(){var e=this;this.props.playing||(this.interval=setInterval(function(){return e.beat()},this.props.beatLengthMs),this.setState({beatsRemaining:this.props.numBeats,loopNumber:1}),this.props.start())}},{key:"stop",value:function(){this.props.playing&&(void 0!==this.interval&&(clearInterval(this.interval),this.interval=void 0),this.props.stop())}},{key:"beat",value:function(){var e=this;this.state.beatsRemaining<=1?(this.setState(function(t){return{beatsRemaining:e.props.numBeats,loopNumber:t.loopNumber+1}}),this.props.loop()):this.setState(function(e){return{beatsRemaining:e.beatsRemaining-1}})}}]),t}(o.PureComponent)),h=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).audioLoop=void 0,n.state={beatLengthMs:1e3,error:!1,looping:!1,numBeats:8},n.audioLoop=new l(n.getLoopLength(n.state)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){e.audioLoop.setSource(t)}).catch(function(t){e.setState({error:!0,looping:!1})})}},{key:"componentWillUpdate",value:function(e,t){t.beatLengthMs===this.state.beatLengthMs&&t.numBeats===this.state.numBeats||this.audioLoop.setDelay(this.getLoopLength(t))}},{key:"render",value:function(){var e=this;if(this.state.error)return o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("h1",{className:"App-title"},"Loopy sound recorder"),o.createElement("p",{className:"App-error"},"Couldn't locate microphone, unable to continue.")));return o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("h1",{className:"App-title"},"Loopy sound recorder"),o.createElement("p",{className:"App-intro"},"You probably ",o.createElement("em",null,"don't")," want to use headphones.")),o.createElement(p,{numBeats:this.state.numBeats,beatLengthMs:this.state.beatLengthMs,setNumBeats:function(t){return e.setNumBeats(t)},setBeatLength:function(t){return e.setBeatLength(t)},playing:this.state.looping,start:function(){return e.startLoop()},stop:function(){return e.stopLoop()},loop:function(){return e.nextLoop()}}))}},{key:"getLoopLength",value:function(e){return e.numBeats*e.beatLengthMs/1e3}},{key:"setNumBeats",value:function(e){this.state.looping||this.setState({numBeats:e})}},{key:"setBeatLength",value:function(e){this.state.looping||this.setState({beatLengthMs:e})}},{key:"startLoop",value:function(){this.audioLoop.start(),this.setState({looping:!0})}},{key:"stopLoop",value:function(){this.audioLoop.stop(),this.setState({looping:!1})}},{key:"nextLoop",value:function(){}}]),t}(o.Component),d=(n(16),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function m(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.render(o.createElement(h,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");d?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):m(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):m(t,e)})}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.68991ceb.chunk.js.map